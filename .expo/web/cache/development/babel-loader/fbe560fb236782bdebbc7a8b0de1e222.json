{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"G:\\\\wamp64\\\\www\\\\projectWellbeingApp\\\\app\\\\screens\\\\ChangePhone.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport AppButton from \"../components/AppButton\";\nimport AppTextInput from \"../components/AppTextInput\";\nimport Screen from \"../components/screen\";\nimport AppText from \"../components/AppText\";\nimport colors from \"../config/colors\";\nimport { useContext } from \"react\";\nimport AuthContext from \"../AuthContext/context\";\nimport userApi from \"../api/user\";\nvar validationSchema = Yup.object().shape({\n  phone: Yup.number().required().test(\"len\", \"Must be excatly 10 numbers\", function (val) {\n    return val.toString().length === 10;\n  }).label(\"Phone number\")\n});\n\nfunction ChangePhone(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState({\n    state: false,\n    error: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      loginFailed = _useState2[0],\n      setLoginFailed = _useState2[1];\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  var handleSubmit = function handleSubmit(_ref2) {\n    var phone, result;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            phone = _ref2.phone;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(userApi.changePhone(user[0].staff_id, phone));\n\n          case 3:\n            result = _context.sent;\n\n            if (result.ok) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", setLoginFailed({\n              state: true,\n              error: \"Something wrong with the database\"\n            }));\n\n          case 6:\n            navigation.navigate(\"Account\");\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(Screen, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.txt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, \"Change Phone Number\"), React.createElement(Formik, {\n    initialValues: {\n      phone: \"\"\n    },\n    onSubmit: handleSubmit,\n    validationSchema: validationSchema,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, function (_ref3) {\n    var handleChange = _ref3.handleChange,\n        handleSubmit = _ref3.handleSubmit,\n        errors = _ref3.errors,\n        setFieldTouched = _ref3.setFieldTouched,\n        touched = _ref3.touched;\n    return React.createElement(React.Fragment, null, React.createElement(AppText, {\n      style: styles.error,\n      visible: loginFailed.state,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 15\n      }\n    }, loginFailed.phone), React.createElement(AppTextInput, {\n      placeholder: \"5061231234\",\n      icon: \"phone-classic\",\n      autoCapitalize: \"none\",\n      keyboardType: \"phone-pad\",\n      textContentType: \"telephoneNumber\",\n      maxLength: 10,\n      onBlur: function onBlur() {\n        return setFieldTouched(\"phone\");\n      },\n      onChangeText: handleChange(\"phone\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }), React.createElement(AppText, {\n      style: styles.error,\n      visible: touched.phone,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }\n    }, errors.phone), React.createElement(AppButton, {\n      sytle: styles.loginButton,\n      onPress: handleSubmit,\n      text: \"Change Number\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }));\n  })));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    padding: 23\n  },\n  error: {\n    color: colors.error,\n    fontSize: 10,\n    alignSelf: \"flex-start\",\n    marginLeft: 10\n  },\n  loginButton: {\n    marginVertical: 30\n  },\n  logo: {\n    bottom: 60\n  },\n  txt: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    marginBottom: 25\n  }\n});\nexport default ChangePhone;","map":{"version":3,"sources":["G:/wamp64/www/projectWellbeingApp/app/screens/ChangePhone.js"],"names":["React","useState","Formik","Yup","AppButton","AppTextInput","Screen","AppText","colors","useContext","AuthContext","userApi","validationSchema","object","shape","phone","number","required","test","val","toString","length","label","ChangePhone","navigation","state","error","loginFailed","setLoginFailed","user","handleSubmit","changePhone","staff_id","result","ok","navigate","styles","container","txt","handleChange","errors","setFieldTouched","touched","loginButton","StyleSheet","create","flex","alignItems","justifyContent","padding","color","fontSize","alignSelf","marginLeft","marginVertical","logo","bottom","fontWeight","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { View, StyleSheet, Text } from \"react-native\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\n\r\nimport AppButton from \"../components/AppButton\";\r\nimport AppTextInput from \"../components/AppTextInput\";\r\nimport Screen from \"../components/screen\";\r\nimport AppText from \"../components/AppText\";\r\nimport colors from \"../config/colors\";\r\nimport { useContext } from \"react\";\r\nimport AuthContext from \"../AuthContext/context\";\r\nimport userApi from \"../api/user\";\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  phone: Yup.number()\r\n    .required()\r\n    .test(\r\n      \"len\",\r\n      \"Must be excatly 10 numbers\",\r\n      (val) => val.toString().length === 10\r\n    )\r\n    .label(\"Phone number\"),\r\n});\r\n\r\nfunction ChangePhone({ navigation }) {\r\n  const [loginFailed, setLoginFailed] = useState({ state: false, error: \"\" });\r\n  const { user } = useContext(AuthContext);\r\n  //check the email\r\n  const handleSubmit = async ({ phone }) => {\r\n    const result = await userApi.changePhone(user[0].staff_id, phone);\r\n    if (!result.ok)\r\n      return setLoginFailed({\r\n        state: true,\r\n        error: \"Something wrong with the database\",\r\n      });\r\n    navigation.navigate(\"Account\");\r\n  };\r\n\r\n  return (\r\n    <Screen>\r\n      <View style={styles.container}>\r\n        <Text style={styles.txt}>Change Phone Number</Text>\r\n        <Formik\r\n          initialValues={{ phone: \"\" }}\r\n          onSubmit={handleSubmit}\r\n          validationSchema={validationSchema}\r\n        >\r\n          {({\r\n            handleChange,\r\n            handleSubmit,\r\n            errors,\r\n            setFieldTouched,\r\n            touched,\r\n          }) => (\r\n            <>\r\n              <AppText style={styles.error} visible={loginFailed.state}>\r\n                {loginFailed.phone}\r\n              </AppText>\r\n              <AppTextInput\r\n                placeholder=\"5061231234\"\r\n                icon={\"phone-classic\"}\r\n                autoCapitalize=\"none\"\r\n                keyboardType=\"phone-pad\"\r\n                textContentType=\"telephoneNumber\"\r\n                maxLength={10}\r\n                onBlur={() => setFieldTouched(\"phone\")}\r\n                onChangeText={handleChange(\"phone\")}\r\n              />\r\n              <AppText style={styles.error} visible={touched.phone}>\r\n                {errors.phone}\r\n              </AppText>\r\n              <AppButton\r\n                sytle={styles.loginButton}\r\n                onPress={handleSubmit}\r\n                text={\"Change Number\"}\r\n              ></AppButton>\r\n            </>\r\n          )}\r\n        </Formik>\r\n      </View>\r\n    </Screen>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    padding: 23,\r\n  },\r\n  error: {\r\n    color: colors.error,\r\n    fontSize: 10,\r\n    alignSelf: \"flex-start\",\r\n    marginLeft: 10,\r\n  },\r\n  loginButton: {\r\n    marginVertical: 30,\r\n  },\r\n  logo: {\r\n    bottom: 60,\r\n  },\r\n  txt: {\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 25,\r\n  },\r\n});\r\n\r\nexport default ChangePhone;\r\n"]},"metadata":{},"sourceType":"module"}